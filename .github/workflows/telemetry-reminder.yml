name: Telemetry Review Reminder

# This workflow reminds to review telemetry reports
# Scheduled for: January 11, 2026 at 10:00 AM PST (18:00 UTC)
# NOTE: After Jan 11, 2026, you can delete this file or disable the workflow

on:
  schedule:
    # Runs at 18:00 UTC (10:00 PST) on January 11
    - cron: '0 18 11 1 *'

  # Allow manual trigger for testing
  workflow_dispatch:

jobs:
  remind:
    runs-on: ubuntu-latest

    steps:
      - name: Check if reminder is needed
        id: check_date
        run: |
          CURRENT_YEAR=$(date +%Y)
          if [ "$CURRENT_YEAR" -gt 2026 ]; then
            echo "skip=true" >> $GITHUB_OUTPUT
            echo "‚ö†Ô∏è Reminder is for 2026 only. Skipping."
          else
            echo "skip=false" >> $GITHUB_OUTPUT
            echo "‚úì Posting reminder..."
          fi

      - name: Post reminder comment to Issue
        if: steps.check_date.outputs.skip == 'false'
        uses: actions/github-script@v7
        with:
          script: |
            const issueNumber = 26;

            const comment = `## ‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ telemetry –æ—Ç—á—ë—Ç—ã!

            –ü—Ä–æ—à–ª–æ 2 –¥–Ω—è —Å –º–æ–º–µ–Ω—Ç–∞ –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º—ã —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏. –ü–æ—Ä–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã!

            ### üìä –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

            #### 1. –õ–æ–∫–∞–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –æ—Ç Claude
            \`\`\`bash
            cd /Users/alexeykrolmini/Downloads/Code/supabase-bridge
            ls -lt telemetry-reports/
            cat telemetry-reports/telemetry-report-*.md
            \`\`\`

            #### 2. WordPress Admin
            - –û—Ç–∫—Ä–æ–π—Ç–µ: **Supabase Bridge ‚Üí Telemetry**
            - –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ 48 —á–∞—Å–æ–≤
            - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ success/failure rate

            #### 3. –õ–æ–≥–∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
            \`\`\`bash
            tail -f telemetry-analyzer.log
            \`\`\`

            ---

            ### üéØ –ó–∞–¥–∞—á–∏:

            - [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3-5 –æ—Ç—á—ë—Ç–æ–≤ Claude
            - [ ] –í—ã—è–≤–∏—Ç—å top-3 error codes
            - [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å % –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞–º–∏
            - [ ] –°–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
            - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            - [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É–ª—É—á—à–µ–Ω–∏–π (—Å–Ω–∏–∑–∏—Ç—å failure rate —Å 13% ‚Üí <5%)

            ---

            **–¶–µ–ª—å:** –í—ã—è–≤–∏—Ç—å root causes 13% failure rate –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã.

            _ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ—Ç GitHub Actions ‚Ä¢ v0.10.2_`;

            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issueNumber,
              body: comment
            });

            console.log(`‚úì Reminder posted to issue #${issueNumber}`);
