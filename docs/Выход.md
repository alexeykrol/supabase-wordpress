–¢–æ—á–Ω–æ üéØ
–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –∫–æ–¥–∞ –≤—ã—Ö–æ–¥–∞ ‚Äî —Ç–∞–º, –≥–¥–µ WordPress –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–Ω—é –∏–ª–∏ –∫–Ω–æ–ø–∫—É ¬´–í—ã–π—Ç–∏¬ª, —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

–ï—Å—Ç—å —Ç—Ä–∏ –ø—Ä–æ—Å—Ç—ã—Ö —Å–ø–æ—Å–æ–±–∞:

‚∏ª

1. –ß–µ—Ä–µ–∑ functions.php / –º–∏–Ω–∏-–ø–ª–∞–≥–∏–Ω ‚Üí —à–æ—Ä—Ç–∫–æ–¥ [supabase_logout_button]

add_shortcode('supabase_logout_button', function () {
    if (!is_user_logged_in()) return ''; // –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º
    return '
    <button id="logout-supabase">–í—ã–π—Ç–∏</button>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("logout-supabase");
      if(!btn) return;
      btn.onclick = async () => {
        const { createClient } = window.supabase;
        const sb = createClient(window.SUPABASE_CFG.url, window.SUPABASE_CFG.anon);
        try {
          await sb.auth.signOut(); // logout Supabase
          await fetch("/wp-json/supabase-auth/logout", {method:"POST", credentials:"include"});
        } catch(e) {
          console.error("Logout error", e);
        }
        window.location.href = "/";
      };
    });
    </script>';
});

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å [supabase_logout_button] –≤ Elementor, –º–µ–Ω—é, —Ñ—É—Ç–µ—Ä –∏ —Ç.–ø.

‚∏ª

2. –ß–µ—Ä–µ–∑ –º–µ–Ω—é WordPress (hook wp_nav_menu_items)

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—É–Ω–∫—Ç –º–µ–Ω—é –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏:

add_filter('wp_nav_menu_items', function($items, $args){
    if (is_user_logged_in()) {
        $items .= '<li><a href="#" id="logout-supabase-link">–í—ã–π—Ç–∏</a></li>';
        $items .= '<script>
        document.addEventListener("DOMContentLoaded", () => {
          const link = document.getElementById("logout-supabase-link");
          if(!link) return;
          link.addEventListener("click", async (e) => {
            e.preventDefault();
            const { createClient } = window.supabase;
            const sb = createClient(window.SUPABASE_CFG.url, window.SUPABASE_CFG.anon);
            await sb.auth.signOut();
            await fetch("/wp-json/supabase-auth/logout", {method:"POST", credentials:"include"});
            window.location.href = "/";
          });
        });
        </script>';
    }
    return $items;
}, 10, 2);

–¢–æ–≥–¥–∞ –ø—É–Ω–∫—Ç –º–µ–Ω—é ¬´–í—ã–π—Ç–∏¬ª –±—É–¥–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

‚∏ª

3. Elementor / –∫–∞—Å—Ç–æ–º–Ω—ã–π HTML-–±–ª–æ–∫

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Elementor –∏ —Ö–æ—á–µ—à—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ –∫–Ω–æ–ø–∫–∏ —Å–∞–º:

<button id="logout-supabase">–í—ã–π—Ç–∏</button>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const btn = document.getElementById("logout-supabase");
  if(!btn) return;
  btn.onclick = async () => {
    const { createClient } = window.supabase;
    const sb = createClient(window.SUPABASE_CFG.url, window.SUPABASE_CFG.anon);
    await sb.auth.signOut();
    await fetch("/wp-json/supabase-auth/logout", {method:"POST", credentials:"include"});
    window.location.href = "/";
  };
});
</script>


‚∏ª

üìå –ò—Ç–æ–≥:
	‚Ä¢	–í –º–µ–Ω—é (–∏–ª–∏ –≤ Elementor —Å–µ–∫—Ü–∏–∏ ¬´Header¬ª) –¥–ª—è –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤—Å—Ç–∞–≤–ª—è–µ—à—å –∫–Ω–æ–ø–∫—É/—Å—Å—ã–ª–∫—É.
	‚Ä¢	JS –ø—Ä–∏ –∫–ª–∏–∫–µ –¥–µ–ª–∞–µ—Ç –¥–≤–æ–π–Ω–æ–π logout (Supabase + WP), –∞ –∑–∞—Ç–µ–º —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é (–∏–ª–∏ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É).

–•–æ—á–µ—à—å, —è —Å–æ–±–µ—Ä—É —ç—Ç–æ –ø—Ä—è–º–æ –≤ –≥–æ—Ç–æ–≤—ã–π —à–æ—Ä—Ç–∫–æ–¥ ([supabase_logout_button]), —á—Ç–æ–±—ã —Ç—ã –≤—Å—Ç–∞–≤–ª—è–ª –≤ Elementor –º–µ–Ω—é –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ JS?